# KPU Simulator Configuration - Datacenter
# High-performance configuration with HBM and multiple compute tiles

name: "Datacenter KPU"
description: "Multi-tile HBM configuration for high-performance inference"

# Host system memory
host_memory:
  region_count: 2          # NUMA regions
  region_capacity_mb: 4096 # 4GB per region
  bandwidth_gbps: 100

# External memory (HBM3)
external_memory:
  bank_count: 8            # 8 HBM stacks
  bank_capacity_mb: 2048   # 2GB per stack = 16GB total
  bandwidth_gbps: 400      # 400 GB/s per stack

# Memory controller configuration
memory_controller:
  controller_count: 8
  page_buffer_count: 16
  page_buffer_capacity_kb: 64

# On-chip memory hierarchy
on_chip_memory:
  # L3: Software-managed global buffer (larger for tiling)
  l3:
    tile_count: 16
    tile_capacity_kb: 512

  # L2: Software-managed tile buffer
  l2:
    bank_count: 64
    bank_capacity_kb: 128

  # L1: Streaming buffers in compute fabric
  l1:
    buffer_count: 32
    buffer_capacity_kb: 128

# Data movement engines
data_movement:
  dma_engine_count: 8
  block_mover_count: 16
  streamer_count: 64

# Compute fabric configuration
compute:
  tile_count: 4
  processor_array:
    rows: 32
    cols: 32
  systolic_mode: true

# Custom address map for easier debugging
address_map:
  host_memory_base: 0x0000000000000000     # 0GB - Host memory
  external_memory_base: 0x0000000400000000 # 16GB - External HBM
  l3_tile_base: 0x0000000800000000         # 32GB - L3 tiles
  l2_bank_base: 0x0000000900000000         # 36GB - L2 banks
  l1_buffer_base: 0x0000000A00000000       # 40GB - L1 buffers
  page_buffer_base: 0x0000000B00000000     # 44GB - Page buffers
